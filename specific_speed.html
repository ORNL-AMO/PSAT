
<style>
	canvas {
		background-color: black;
		margin-top: .25rem;	
		display:block;	
	}
	#plot {
		display:none;
		vertical-align:top
	}
	#xcalc_btn {
		
		margin-top:1rem
	}
	select,input {
		margin-bottom: .5rem;
	}
}
</style>
<div>
	<h1>Specific Speed</h1>
	<div style='display:flex; justify-content: space-between;'>
		<div>
			<a style='display:block' onclick='lnk(event,"what_is_ss")' href=''>What Is Specific Speed?</a><br>
			<span>Pump Style</span><br>
			<select name='pump_style'>
				<option selected disabled>Choose</option>
				<option>End suction slurry</option>
				<option>End suction sewage</option>
				<option>End suction stock</option>
				<option>End suction submersible sewage</option>
				<option>API double suction</option>
				<option>Multistage boiler feed</option>
				<option>End suction ANSI/API</option>
				<option>Axial flow</option>
				<option>Double suction</option>
				<option>Vertical turbine</option>
				<option>Large end suction</option>
			</select><br>
			Pump Speed<br>
			<input name='pump_rated_speed'><br>
			Flow<br>
			<input name='flow'><br>
			Head<br>
			<input name='head'><br>
			<button id=plot_btn class=prime onclick='calc()'>CALCULATE</button>
		</div>
		<div id=plot>
			<canvas width="700" height="500"></canvas>
			<div style='display:flex; justify-content: space-between;'>
				<div>Specific Speed: <span id=ss></span></div>
				<div>Efficiency Correction: <span id=ec></span></div>				
			</div>
				
		</div>
	</div>
</div>

<script>//# sourceURL=*pump_eff
	function plot() {
		P = {
			cnv: Cnv,
			padX: 25,
			stepX: 500,
			cntX: 20,
			padY: 50,
			stepY: 2,
			cntY: 14
		};
		const ctx = setupPlot(`Specific Speed`,'Efficiency Correction (%)');
						
		curve(x => 
			Bridge.achievableEfficiency(setData({
				specific_speed: x,
			})));
	}
	function calc() {
		const ss = nm('pump_rated_speed').val() * Math.sqrt(nm('flow').val()) / Math.pow(nm('head').val(),.75);
		$('#ss').text(rnd(ss));
		$('#ec').text(rnd(Bridge.achievableEfficiency(setData({
			specific_speed: ss,
		}))));
		Cnv.width+=0;
		plot();				
	}	 
	Cnv = dom('canvas');
	
	nmAll().change(()=>{
		$('#plot').hide();
		let d = setData({});
		if (d.pump_style>=0 && d.flow!='' && d.head!='' && d.pump_rated_speed!='') {
			$('#plot_btn').show();
		} else {
			$('#plot_btn').hide();
		}
	});
	//nmAll().first().change();
	
	
</script>

