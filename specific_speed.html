
<style>
	em {
		color: #5d9300;
	}
	canvas {
		background-color: black;
		margin-top: .25rem;	
		display:block;	
	}
	#plot {
		display:none;
		vertical-align:top
	}
	#xcalc_btn {
		
		margin-top:1rem
	}
	select,input {
		margin-bottom: .5rem;
	}
}
</style>
<div>
	<h1>Specific Speed</h1>
	<div style='display:flex; justify-content: space-between;'>
		<div>
			<a style='display:block' onclick='lnk(event,"what_is_ss")' href=''>What Is Specific Speed?</a><br>
			<span>Pump Style</span><br>
			<select name='pump_style'>
				<option selected disabled>Choose</option>
				<option>End suction slurry</option>
				<option>End suction sewage</option>
				<option>End suction stock</option>
				<option>End suction submersible sewage</option>
				<option>API double suction</option>
				<option>Multistage boiler feed</option>
				<option>End suction ANSI/API</option>
				<option>Axial flow</option>
				<option>Double suction</option>
				<option>Vertical turbine</option>
				<option>Large end suction</option>
			</select><br>
			Pump Speed <em>(rpm)</em><br>
			<input name='pump_rated_speed'><br>
			<label id=lbl_flow>Flow</label>
			<input name='flow'><br>
			<label id=lbl_hd>Head</label>
			<input name='head'><br>
			<button id=plot_btn class=prime onclick='calc()'>CALCULATE</button>
		</div>
		<div id=plot>
			<canvas width="700" height="500"></canvas>
			<div style='display:flex; justify-content: space-between;'>
				<div>Specific Speed: <span id=ss></span></div>
				<div>Efficiency Correction: <span id=ec></span></div>				
			</div>
				
		</div>
	</div>
</div>

<script>//# sourceURL=*pump_eff
	function plot() {
		P = {
			cnv: Cnv,
			padX: 25,
			cntX: 20,
			padY: 50,
			stepY: 2,
			cntY: 14
		};

		let lblTxt = 'U.S.', 
			m = 1, 
			d = setData({}),
			stepX = 500;
		if (unit(DIST) == 'm') {
			lblTxt = 'metric';
			m = 3472 / 4033;
			if (d.pump_style==9) {
				stepX = 1500;
			} else {
				stepX = 600;
			}		
		} else if (d.pump_style==9) {
			stepX = 1250;
		}
		$.extend(P,{stepX});
		setupPlot(`Specific Speed (${lblTxt})`,'Efficiency Correction (%)');
		curve(x => 
			Bridge.achievableEfficiency($.extend({
				specific_speed: x * m,
			},d)));
	}
	function calc() {
		const ss = nm('pump_rated_speed').val() * Math.sqrt(nm('flow').val()) / Math.pow(nm('head').val(),.75);
		$('#ss').text(rnd(ss));
		$('#ec').text(rnd(Bridge.achievableEfficiency(setData({
			specific_speed: ss,
		}))));
		Cnv.width+=0;
		plot();				
	}	 
	Cnv = dom('canvas');
	
	nmAll().change(()=>{
		$('#plot').hide();
		let d = setData({});
		if (d.pump_style>=0 && d.flow!='' && d.head!='' && d.pump_rated_speed!='') {
			$('#plot_btn').show();
		} else {
			$('#plot_btn').hide();
		}
	});
	nmAll().first().change();
	$('#lbl_flow').append(em(unit(DIST) == 'ft' ? 'gpm' : 'm^3/hr'));
	$('#lbl_hd').append(em(unit(DIST)));	
	
</script>

