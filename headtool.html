<style scoped=scoped>
	em {
		font-size: smaller;
		font-weight: lighter;
	}
	table input {
		margin-bottom: .75rem;
	}	
	.results {
		vertical-align: bottom;				
	}
	.results table {
		background-color: lightgray;
	}	
	.results td, .results th {
		padding-left: 1rem;
		text-align: left;
	}
	.result {
		color: green;
		font-weight: bold;
	}
}
</style>
<button onclick='backToGrid()'><i class="fa fa-long-arrow-left"></i></button>
<h1>Head Tool</h1>
<table style='width: 100%'>
	<tr>
		<td>
			Suction pipe diameter<br>
			<input id=Ds type=number/><br>
			Suction gauge pressure<br>
			<input id=Ps type=number/><br>
			Suction gauge elevation<br>
			<input id=Zs type=number/><br>
			Suction line loss coefficients<br>
			<input id=Ks type=number/><br>

			<label><input type=checkbox> Suction tank</label><br>

			Discharge pipe diameter<br>
			<input id=Dd type=number/><br>
			Discharge gauge pressure<br>
			<input id=Pd type=number/><br>
			Discharge gauge elevation<br>
			<input id=Zd type=number/><br>
			Discharge line loss coefficients<br>
			<input id=Kd type=number/><br>
			<!-- Fluid specific gravity<br>
			<input name='specific_gravity' type=number/><br>
			Flow rate <em>(L/s)</em><br>
			<input style='margin-bottom: 0' type=number/>
			<button onclick=showUnit(this,'#unit_flow')><i class="fa fa-calculator"/></button>	 -->
		</td>
		<td class=results>
			<table>
				<tr>
					<th>Head</th>
					<th>Result <em>(m)</em></th>
				</tr>
				<tr>
					<td>Differential elevation head</td>
					<td>0</td>
				</tr>
				<tr>
					<td>Differential pressure head</td>
					<td>12.16</td>
				</tr>
				<tr>
					<td>Differential velocity head</td>
					<td>17792</td>
				</tr>
				<tr>
					<td>Estimated suction friction head</td>
					<td>72144.50</td>
				</tr>
				<tr>
					<td>Estimated discharge friction head</td>
					<td>62080</td>
				</tr>
				<tr>
					<td>Pump head</td>
					<td class=result>52028</td>
				</tr>				
			</table>
		</td>
	</tr>
	<tr>
		<td/>
		<td>
			<button onclick='calc()'>CALCULATE</button>
			<button onclick='back()'>ACCEPT</button>			
		</td>
	</tr>
</table>
			

<script>	
	function showUnit_mm(e) {
		showUnitSgl(e,'inches',25.4);
	}
	function showUnit_kPa(e) {
		showUnitSgl(e,'pounds per square inch <em>(psig)</em>',6.89476);
	}
	function v(d,flow) {
		return flow / (Math.PI*(d/2)*(d/2));
	}
	G = 9.80665;
	function vHd(v) {
		return v*v/2/G;
	}
	function r(txt,v) {
		$(`.results td:contains(${txt})`).next().text(rnd(v));
	}
	function calc() {
		let flow = 3000*.001, spec_grav=1,
			elevHd = $('#Zd').val()-$('#Zs').val(),
			presHd = ($('#Pd').val()-$('#Ps').val())/G/spec_grav,			
			vHdS = vHd(v($('#Ds').val()/1000,flow)), 
			vHdD = vHd(v($('#Dd').val()/1000,flow)),
			vHdDif = vHdD-vHdS,
			sucHd = $('#Ks').val()*vHdS,
			disHd = $('#Kd').val()*vHdD,
			hd = elevHd + presHd + flow + vHdDif + sucHd + disHd;

		r('elevation',elevHd);		
		r('pressure',presHd);
		r('velocity',vHdDif);
		r('suction',sucHd);
		r('discharge',disHd);
		r('Pump',hd);
	}
	function hdFldUnit(s,txt) {
		$(`#${s}s`).after(` <em>(${txt})</em>`);
		$(`#${s}d`).after(` <em>(${txt})</em>`);
	}
	units = loadProp('units');
	txt = units <= 1 ? 'mm' : 'inches';
	hdFldUnit('D',txt);
	txt = units <= 1 ? 'm' : 'ft';
	hdFldUnit('Z',txt);
	txt = units <= 1 ? 'kPa' : 'psig';
	hdFldUnit('P',txt);

</script>
