<style scoped>
	li {
		list-style-type:none;
	}
	.disabled {
		opacity: .6;
	}	
	li:not(.disabled):hover {
		cursor: pointer;
		color: dodgerblue;
	}
	
</style>
<h1>Conditions</h1>
<ul/>
<hr>
<button onclick='Back()'>CANCEL</button>
<button onclick='nu()'>NEW</button>
<button onclick='removeAll()'>REMOVE ALL</button>
<button>IMPORT</button>
<button>EXPORT</button>


<script>
	function nu() {
		Idx = Cond.length;
		$('body').load('notes.html');
	}
	function removeAll() {
		LS.removeItem('conditions');
		Cond = [];
		Idx = 0;
		start();
		$(Main).find('td:nth-child(n+3),th:nth-child(n+3):nth-last-child(n+2)').remove();
		Back();
	}
	function update(e) {debugger;
		Idx = $(e).index();
		Back();
		setPump();
	}
	function start() {
		$.each(Cond,function(i,e) {		
			let th = Main.find('th').filter(function(j,el) {
		      return i == $(el).data('idx');
		    });
		    const attr = th.length == 0 ? 'onclick=update(this)' : 'class=disabled';
		    $('ul').append(`<li ${attr}>${e.name}</li>`);		  
		});		
		if (Cond.length==0) {
			$('ul').html('<em>None</em>');
		}		
	}
	start();

</script>