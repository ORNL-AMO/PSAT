
<style>
	canvas {
		background-color: black;
		display: none;
	}
}
</style>
<div>
	<h1>Pump Efficiency</h1>
	Pump Style
	<select name='pump_style' style='vertical-align: middle'>
        <option>Choose</option>
		<option>End suction slurry</option>
        <option>End suction sewage</option>
        <option>End suction stock</option>
        <option>API double suction</option>
        <option>Multistage boiler feed</option>
        <option>End suction ANSI/API</option>
        <option>Axial flow</option>
        <option>Double suction</option>
        <option>Vertical turbine</option>
        <option>Large end suction</option>
    </select>
	<canvas id=plot width="700" height="500" style='margin-top:1rem'></canvas>
</div>

<script>//# sourceURL=*pump_eff
	function plot() {
		P = {
			cnv: Cnv,
			padX: 25,
			stepX: 250,
			cntX: 20,
			padY: 50,
			stepY: 5,
			cntY: 20			
		}
		const ctx = setupPlot('Flow Rate (gpm)','Achievable Efficiency (average)');
				
		ctx.fillStyle = 'white';
		ctx.fillText('Achievable Efficiency (max)',Cnv.width-P.padX,P.padY-5-15);
		
		let m = new Map();
		function get(x) {
			let r = m.get(x);
			if (!r) {
				r = Bridge.pumpEfficiency(cvtArg(setData({
						flow: x,
						pump_specified: 0
				})));
				m.set(x,r);						
				console.log(x,r);		
			}
			return r;
		}
		curve(x => get(x).average);
//		curve(x => get(x).current,'white');
	}
	 
	Cnv = dom('canvas');
	
	nm('pump_style').change(()=>{
		Cnv.width+=0;
		plot();
		setData(MotorPerf);
		saveProp('motorPerf',MotorPerf);
	});

	
</script>

